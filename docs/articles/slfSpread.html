<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Get started using slfSpread • slfSpread</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get started using slfSpread">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">slfSpread</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/slfSpread.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quantify risk to specific viticultural regions</h6></li>
    <li><a class="dropdown-item" href="../articles/150_create_risk_report.html">Example usage of create_risk_report.R to create reports of key viticultural areas</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Initialize slfSpread</h6></li>
    <li><a class="dropdown-item" href="../articles/010_initialize_pkg.html">Initialization of renv package for dependencies</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>1. Retrieve and tidy input data for MaxEnt</h6></li>
    <li><a class="dropdown-item" href="../articles/020_retrieve_SLF_records.html">Retrieve SLF records from various sources and tidy them for MaxEnt modeling</a></li>
    <li><a class="dropdown-item" href="../articles/030_retrieve_bioclim_variables.html">Retrieve bioclim rasters from CHELSA and tidy them for MaxEnt modeling</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>2. SDM modeling pipeline</h6></li>
    <li><a class="dropdown-item" href="../articles/040_setup_global_MaxEnt_model.html">Setup for global-scale MaxEnt model</a></li>
    <li><a class="dropdown-item" href="../articles/050_run_global_MaxEnt_model.html">Run global-scale MaxEnt model</a></li>
    <li><a class="dropdown-item" href="../articles/060_setup_regional_MaxEnt_models.html">Setup for regional-scale MaxEnt models</a></li>
    <li><a class="dropdown-item" href="../articles/070_run_regional_invaded_MaxEnt_model.html">Run 'Ri.NAmerica' model trained on SLF invaded region in North America</a></li>
    <li><a class="dropdown-item" href="../articles/080_run_regional_invaded_asian_MaxEnt_model.html">Run 'Ri.Asia' model trained on SLF invaded range in Japan and South Korea</a></li>
    <li><a class="dropdown-item" href="../articles/090_run_regional_native_MaxEnt_model.html">Run 'Rn' model trained on SLF native range in east Asia</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>3. Ensemble Regional-scale SDMs</h6></li>
    <li><a class="dropdown-item" href="../articles/100_run_ExDet_MIC.html">Run an Extrapolation Detection (NT2) analysis and calculate MIC</a></li>
    <li><a class="dropdown-item" href="../articles/110_ensemble_regional_models.html">Ensemble regional-scale models into a single prediction</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>4. Quantify SLF risk and model fit</h6></li>
    <li><a class="dropdown-item" href="../articles/120_create_suitability_maps.html">Map regional ensemble predictions and intercept with global model</a></li>
    <li><a class="dropdown-item" href="../articles/130_create_suitability_xy_plots_viticultural.html">Plot shift in SLF suitability for important viticultural regions under climate change</a></li>
    <li><a class="dropdown-item" href="../articles/131_create_suitability_xy_plots_SLF.html">Plot stability of known SLF populations due climate change effects</a></li>
    <li><a class="dropdown-item" href="../articles/140_plot_response_curves.html">Plot response curves</a></li>
    <li><a class="dropdown-item" href="../articles/141_plot_AUC_var_cont.html">Plot AUC curves and variable contribution graphs</a></li>
    <li><a class="dropdown-item" href="../articles/142_calculate_model_fit.html">Calculate model fit statistics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ieco-lab/slfSpread/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="slfSpread_files/kePrint-0.0.1/kePrint.js"></script><link href="slfSpread_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get started using slfSpread</h1>
                        <h4 data-toc-skip class="author">Samuel M.
Owens<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Temple University &lt;a href="http://www.biodiversitycenter.org/" class="external-link"&gt;Center for Biodiversity&lt;/a&gt; &lt;a href="https://www.iecolab.org/" class="external-link"&gt;iEco Lab&lt;/a&gt; &lt;a href="mailto:sam.owens@temple.edu" class="email"&gt;sam.owens@temple.edu&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>
</h4>
            
            <h4 data-toc-skip class="date">2024-10-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ieco-lab/slfSpread/blob/HEAD/vignettes/slfSpread.Rmd" class="external-link"><code>vignettes/slfSpread.Rmd</code></a></small>
      <div class="d-none name"><code>slfSpread.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="how-to-use-this-project">How to use this project<a class="anchor" aria-label="anchor" href="#how-to-use-this-project"></a>
</h2>
<div class="section level3">
<h3 id="produce-localized-reports-on-slf-risk-to-viticulture">1. Produce localized reports on SLF risk to viticulture<a class="anchor" aria-label="anchor" href="#produce-localized-reports-on-slf-risk-to-viticulture"></a>
</h3>
<p>Our primary datasets, including risk maps and a viticultural risk
analysis, can be accessed by executing the function
<code><a href="../reference/create_risk_report.html">create_risk_report()</a></code>. This function creates a localized (at
the country or state/provincial level) report of the risk for
<em>Lycorma delicatula</em> to local viticulture. It can be applied to
globally important winegrowing regions because it uses our dataset
<code>data/wineries_tidied.rds</code>, which contains a sample (1,074)
of the world’s most important winegrowing regions. Users can and should
apply this function for their locality as we are projecting that the
risk of <em>Lycorma delicatula</em> establishment will exapnd under
climate change. <em>Lycorma delicatula</em> has been classified as being
capable of (global) pan-invasion and viticulure has already been
devastated in some regions, so there is high potential for viticultural
damage under climate change (Huron et al, 2022).</p>
<p>For examples and best practice for usage of
<code><a href="../reference/create_risk_report.html">create_risk_report()</a></code>, see the vignette <a href="https://github.com/ieco-lab/slfSpread/blob/master/vignettes/150_create_risk_report.Rmd" class="external-link">150_create_risk_report</a></p>
<p>Our function recreates major datasets that we provide in our main
analysis, including:</p>
<ol style="list-style-type: decimal">
<li>list of known important wine regions within the locality with
predicted suitability values and levels</li>
<li>current and future risk maps for SLF establishment</li>
<li>range shift map of potential range expansion for L delicatula under
climate change</li>
<li>viticultural quadrant plot depicting of the risk for SLF
establishment for known wine regions within the locality. This plot
depicts the intersection of our two modeled scales.</li>
<li>risk table quantifying the level of risk to vineyards according to
the quadrant plot</li>
</ol>
<p>Here is an example of a workflow for creating a localized risk map
and how this might be applied:</p>
<p>I might begin by creating a report at the national level. To create
this, you will need the alpha-3 iso country code.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">slfSpread</span><span class="fu">::</span><span class="fu"><a href="../reference/create_risk_report.html">create_risk_report</a></span><span class="op">(</span></span>
<span>  locality.iso <span class="op">=</span> <span class="st">"usa"</span>,</span>
<span>  locality.type <span class="op">=</span> <span class="st">"country"</span>, <span class="co"># to specify the type of report</span></span>
<span>  buffer.dist <span class="op">=</span> <span class="fl">20000</span>, <span class="co"># in meters, this is the buffer zone defining the viticultural area</span></span>
<span>  create.dir <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># should a directory be created for the report? If TRUE, param mypath will be required</span></span>
<span>  save.report <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># should the report be saved?</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>You should first note the three most important outputs of this
function: 1. the risk maps 2. the accompanying viticultural risk
quadrant plot 3. tabled list of viticultural regions in this
locality</p>
<p>First, we observe the risk map, which depicts the risk of SLF
establishment using the agreement between our regional-scale model
ensemble and our global-scale model. More agreement on suitability mean
higher risk.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">USA_current</span> <span class="op">&lt;-</span> <span class="va">usa_slf_risk_report</span><span class="op">[[</span><span class="st">"risk_maps"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"present_risk_map"</span><span class="op">]</span><span class="op">]</span> <span class="op">+</span></span>
<span>  <span class="co"># you may need to crop the map due to outlying territories, as we have done here</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="op">-</span><span class="fl">125</span>, <span class="op">-</span><span class="fl">65</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span><span class="va">USA_current</span></span></code></pre></div>
<p><img src="slfSpread_files/figure-html/retrieve%20current%20risk%20map%20for%20USA-1.png" width="700"></p>
<p><strong>Fig 1.</strong> Projected current risk of <em>Lycorma
delicatula</em> establishment | USA</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">USA_future</span> <span class="op">&lt;-</span> <span class="va">usa_slf_risk_report</span><span class="op">[[</span><span class="st">"risk_maps"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"2041-2070_risk_map"</span><span class="op">]</span><span class="op">]</span> <span class="op">+</span></span>
<span>  <span class="co"># you may need to crop the map due to outlying territories, as we have done here</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="op">-</span><span class="fl">125</span>, <span class="op">-</span><span class="fl">65</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">USA_future</span></span></code></pre></div>
<p><img src="slfSpread_files/figure-html/retrieve%20projected%20future%20risk%20map%20for%20USA-1.png" width="700"></p>
<p><strong>Fig 2.</strong> Projected future risk of <em>Lycorma
delicatula</em> establishment under climate change | USA</p>
<p>The points on the map represent key viticultural regions. We have
extracted the suitability of each viticultural region and depicted its
quantitative shift in risk on our second output, the viticultural risk
quadrant plot. This plot quantifies the level of risk along both modeled
scales, both presently (light purple) and in the future (dark purple)
under a predicted climate change shift (arrows):</p>
<p><img src="slfSpread_files/figure-html/retrieve%20risk%20plot%20USA-1.png" width="700"></p>
<p><strong>Fig. 3:</strong> Projected shift in the risk for <em>Lycorma
delicatula</em> establishment at key viticultural regions due to climate
change | USA</p>
<p>The accompanying table provides a list of key viticultural regions
and their geographical region (state/province), with predicted risk
levels:</p>
<p><strong>Table 1:</strong> List of viticultural regions and their
projected risk</p>
<p>You may begin to notice that a particular region has many records,
like we can see is the case for Washington State. You could then produce
a report only for that region, to get a better idea of the overall trend
of risk shift due to climate change. We will produce a report for
Washington State alone, to better visualize this trend:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">slfSpread</span><span class="fu">::</span><span class="fu"><a href="../reference/create_risk_report.html">create_risk_report</a></span><span class="op">(</span></span>
<span>  locality.iso <span class="op">=</span> <span class="st">"usa"</span>, <span class="co"># the country iso is still required</span></span>
<span>  locality.name <span class="op">=</span> <span class="st">"washington"</span>, <span class="co"># the name must be specified</span></span>
<span>  locality.type <span class="op">=</span> <span class="st">"state_province"</span>, <span class="co"># we have changed the report type</span></span>
<span>  buffer.dist <span class="op">=</span> <span class="fl">20000</span>, <span class="co"># in meters</span></span>
<span>  create.dir <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  save.report <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We can see that most of Washington is at some level of SLF risk
presently. Under climate change, risk is projected to decrease some, but
one or both modeled scales still predict that SLF can establish in most
of the state.</p>
<p><img src="slfSpread_files/figure-html/retrieve%20current%20risk%20map%20for%20washington%20USA-1.png" width="700"></p>
<p><strong>Fig. 3:</strong> Projected current risk of <em>Lycorma
delicatula</em> establishment | Washington, USA</p>
<p><img src="slfSpread_files/figure-html/retrieve%20projected%20future%20risk%20map%20for%20washington%20USA-1.png" width="700"></p>
<p><strong>Fig. 4:</strong> Projected future risk of <em>Lycorma
delicatula</em> establishment under climate change | Washington, USA</p>
<p>Based on the viticultural risk quadrant plot, we can now see that
Washington state exhibits a totally different trend from the rest of the
country. While viticultural regions across the united states exhibit a
range of risk levels, regions in Washington are either at high or
extreme risk for SLF establishment, and this pattern does not change
under predicted climate change levels.</p>
<p><em>Note</em> At this scale, we can see the buffer zones used to
assess viticultural region risk.</p>
<p><img src="slfSpread_files/figure-html/retrieve%20risk%20plot%20washington%20USA-1.png" width="700"></p>
<p><strong>Fig. 5:</strong> Projected shift in the risk for <em>Lycorma
delicatula</em> establishment at key viticultural regions due to climate
change | Washington, USA</p>
<p>In our more localized analysis, we might also be interested in
quantifying the total area at risk for SLF or the total number of
viticultural regions at risk for SLF establishment. For this, we will
look at two additional outputs from
<code><a href="../reference/create_risk_report.html">create_risk_report()</a></code>:</p>
<ol style="list-style-type: decimal">
<li>risk map area table- this quantifies the areas and proportions of
the total occupied by each risk category on the risk map</li>
<li>viticultural risk table- this quantifies the number of winegrowing
regions that are projected to fall into each risk category, both now and
in the future under climate change</li>
</ol>
<p>First, let’s look at the risk map area table:</p>
<p><strong>Table 2:</strong> Table quantifying the projected current and
future suitable area for <em>Lycorma delicatula</em> establishment |
Washington, USA</p>
<p>We can see from this table that the total unsuitable area decreased
under climate change, from 8.6% to 7.4%, but this change was mostly
found in the regional-scale model ensemble, which predicted ~9% more
suitable arae under climate change. Our modeled scales also diverged in
the agreed suitable area (suitable_agreement decreased by ~9%).</p>
<p>Next, lets look at the viticultural risk table:</p>
<p><strong>Table 3:</strong> Table quantifying the projected shift in
the risk for <em>Lycorma delicatula</em> establishment at key
viticultural regions due to climate change | Washington, USA</p>
<table class="table table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-weight: bold; " colspan="6">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Risk of L delicatula establishment for important viticultural regions
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
extreme_2055
</th>
<th style="text-align:left;">
high_2055
</th>
<th style="text-align:left;">
moderate_2055
</th>
<th style="text-align:left;">
low_2055
</th>
<th style="text-align:left;">
total_present
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 4cm; ">
extreme_present
</td>
<td style="text-align:left;min-width: 4cm; ">
1
</td>
<td style="text-align:left;min-width: 4cm; ">
0
</td>
<td style="text-align:left;min-width: 4cm; ">
0
</td>
<td style="text-align:left;min-width: 4cm; ">
0
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    color: darkred !important;">1</span>
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 4cm; ">
high_present
</td>
<td style="text-align:left;min-width: 4cm; ">
+0
</td>
<td style="text-align:left;min-width: 4cm; ">
6
</td>
<td style="text-align:left;min-width: 4cm; ">
0
</td>
<td style="text-align:left;min-width: 4cm; ">
0
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    color: darkorange !important;">6</span>
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 4cm; ">
moderate_present
</td>
<td style="text-align:left;min-width: 4cm; ">
+0
</td>
<td style="text-align:left;min-width: 4cm; ">
+0
</td>
<td style="text-align:left;min-width: 4cm; ">
0
</td>
<td style="text-align:left;min-width: 4cm; ">
0
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    color: gold !important;">0</span>
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 4cm; ">
low_present
</td>
<td style="text-align:left;min-width: 4cm; ">
+0
</td>
<td style="text-align:left;min-width: 4cm; ">
+0
</td>
<td style="text-align:left;min-width: 4cm; ">
+0
</td>
<td style="text-align:left;min-width: 4cm; ">
0
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    color: darkgrey !important;">0</span>
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 4cm; ">
total_2055
</td>
<td style="text-align:left;min-width: 4cm; ">
<span style=" font-weight: bold;    color: darkred !important;">1</span>
</td>
<td style="text-align:left;min-width: 4cm; ">
<span style=" font-weight: bold;    color: darkorange !important;">6</span>
</td>
<td style="text-align:left;min-width: 4cm; ">
<span style=" font-weight: bold;    color: gold !important;">0</span>
</td>
<td style="text-align:left;min-width: 4cm; ">
<span style=" font-weight: bold;    color: darkgrey !important;">0</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">7</span>
</td>
</tr>
</tbody>
<tfoot><tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup>a</sup> 20000m buffer used for suitability of viticultural areas
</td>
</tr></tfoot>
<tfoot><tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup>a</sup> number signs indicate whether climate change is increasing
or decreasing risk
</td>
</tr></tfoot>
</table>
<p>From this table, we can see that all 7 viticultural regions maintain
their present risk level under climate change. Six regions fall into the
high risk category (regional ensemble suitability only) and one falls
into the extreme risk category (suitable area agreement).</p>
<p>Users should explore the other localities and data types available
with this function.</p>
</div>
<div class="section level3">
<h3 id="recreate-the-analysis-for-another-invasive-species-of-interest">2. Recreate the analysis for another invasive species of
interest<a class="anchor" aria-label="anchor" href="#recreate-the-analysis-for-another-invasive-species-of-interest"></a>
</h3>
<p>For modelers who wish to apply this pipeline for other invasive
species, this pipeline can easily be adapted to model the risk of
establishment by simply changing the input datasets and modeled
scales.</p>
<p>First, a modeler would need to change the input datasets, outlined in
vignettes 020-040. In vignette 020, I retrieved input data from GBIF,
which hosts datasets for thousands of other species. I recommend
including extra data from other databases and the literature as I did in
my analysis, but GBIF is a great starting point for data retrieval. Here
is an example using the package <code>rgbif</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">slf_id</span> <span class="op">&lt;-</span> <span class="fu">rgbif</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/occ_search.html" class="external-link">occ_search</a></span><span class="op">(</span>scientificName <span class="op">=</span> <span class="st">"Lycorma delicatula"</span><span class="op">)</span><span class="op">[[</span><span class="st">"data"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">slf_id</span> <span class="op">&lt;-</span> <span class="va">slf_id</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">taxonKey</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># initiate download</span></span>
<span><span class="va">records_gbif</span> <span class="op">&lt;-</span> <span class="fu">rgbif</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/occ_download.html" class="external-link">occ_download</a></span><span class="op">(</span></span>
<span>  <span class="co"># general formatting</span></span>
<span>  type <span class="op">=</span> <span class="st">"and"</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"SIMPLE_CSV"</span>,</span>
<span>  <span class="co"># inclusion rules</span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/download_predicate_dsl.html" class="external-link">pred</a></span><span class="op">(</span><span class="st">"taxonKey"</span>, <span class="va">slf_id</span><span class="op">)</span>, <span class="co"># search by GBIF ID, not species name</span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/download_predicate_dsl.html" class="external-link">pred</a></span><span class="op">(</span><span class="st">"hasCoordinate"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/download_predicate_dsl.html" class="external-link">pred</a></span><span class="op">(</span><span class="st">"hasGeospatialIssue"</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/download_predicate_dsl.html" class="external-link">pred</a></span><span class="op">(</span><span class="st">"occurrenceStatus"</span>, <span class="st">"PRESENT"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The input covariates would also need to change based on what is
biologically relevant for the particular species. I outline the process
of choosing input covariates in vignette 030.</p>
<p>Once the input data have been adapted to the user’s needs, the
regional-scale models will need to be applied per region of interest.
Each regional-scale model depends on a spcecific background area
selection for MaxEnt that will need to change. I outline the process for
choosing this area in vignette 060, in which I subset the presence data
by region and intersect these subsets with the Köppen-Geiger climate
zones to select the appropriate background area. This resulting polygon
would need to be cropped to the region of interest. I use the
<code>kgc</code>, <code>terra</code>, and <code>sf</code> packages for
this analysis:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get K-G zones</span></span>
<span><span class="va">kmz_data</span> <span class="op">&lt;-</span> <span class="fu">kgc</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/kgc/man/kmz.html" class="external-link">kmz</a></span></span>
<span></span>
<span><span class="co"># generate coordinates</span></span>
<span><span class="va">kmz_lat</span> <span class="op">&lt;-</span> <span class="fu">kgc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kgc/man/genCoords.html" class="external-link">genCoords</a></span><span class="op">(</span>latlon <span class="op">=</span> <span class="st">"lat"</span>, full <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">kmz_lon</span> <span class="op">&lt;-</span> <span class="fu">kgc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kgc/man/genCoords.html" class="external-link">genCoords</a></span><span class="op">(</span>latlon <span class="op">=</span> <span class="st">"lon"</span>, full <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># join data and coordinates</span></span>
<span><span class="va">kmz_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.math.uzh.ch/pages/spam/reference/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">kmz_lat</span>, <span class="va">kmz_lon</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://www.math.uzh.ch/pages/spam/reference/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">kmz_data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># relocate column</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">kmz_lon</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># convert to raster</span></span>
<span><span class="va">KG_zones_rast</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">kmz_data</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"xyz"</span>,</span>
<span>  crs <span class="op">=</span> <span class="st">"EPSG:4326"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># next, convert raster to polygon</span></span>
<span><span class="va">KG_zones_poly</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/as.polygons.html" class="external-link">as.polygons</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">KG_zones_rast</span>,</span>
<span>  aggregate <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># combine cells with the same value into one area</span></span>
<span>  values <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># include cell values as attributes</span></span>
<span>  crs <span class="op">=</span> <span class="st">"EPSG:4326"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">KG_zones_poly</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">KG_zones_poly</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># intersect polygon and presences</span></span>
<span><span class="va">regional_poly</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_join.html" class="external-link">st_filter</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">KG_zones_poly</span>, y <span class="op">=</span> <span class="va">presence_data</span><span class="op">)</span></span></code></pre></div>
<p>Once the presence data, covariate data and background points have
been chosen, the user might apply this framework for any invasive
species and ensemble models for any region of interest.</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Bryant, C., Wheeler, N. R., Rubel, F., &amp; French, R. H. (2017).
kgc: Koeppen-Geiger Climatic Zones. <a href="https://CRAN.R-project.org/package=kgc" class="external-link uri">https://CRAN.R-project.org/package=kgc</a></p>
<p>Chamberlain S, Barve V, Mcglinn D, Oldoni D, Desmet P, Geffert L, Ram
K (2024). rgbif: Interface to the Global Biodiversity Information
Facility API. R package version 3.8.0, <a href="https://CRAN.R-project.org/package=rgbif" class="external-link uri">https://CRAN.R-project.org/package=rgbif</a>.</p>
<p>Gallien, L., Douzet, R., Pratte, S., Zimmermann, N. E., &amp;
Thuiller, W. (2012). Invasive species distribution models – how
violating the equilibrium assumption can create new insights. Global
Ecology and Biogeography, 21(11), 1126–1136. <a href="https://doi.org/10.1111/j.1466-8238.2012.00768.x" class="external-link uri">https://doi.org/10.1111/j.1466-8238.2012.00768.x</a></p>
<p>Huron, N. A., Behm, J. E., &amp; Helmus, M. R. (2022). Paninvasion
severity assessment of a U.S. grape pest to disrupt the global wine
market. Communications Biology, 5(1), 655. <a href="https://doi.org/10.1038/s42003-022-03580-w" class="external-link uri">https://doi.org/10.1038/s42003-022-03580-w</a></p>
<p>Pebesma, E., 2018. Simple Features for R: Standardized Support for
Spatial Vector Data. The R Journal 10 (1), 439-446, <a href="https://doi.org/10.32614/RJ-2018-009" class="external-link uri">https://doi.org/10.32614/RJ-2018-009</a></p>
<p>Phillips, S. J., Anderson, R. P., &amp; Schapire, R. E. (2006).
Maximum entropy modeling of species geographic distributions. Ecological
Modelling, 190(3), 231–259. <a href="https://doi.org/10.1016/j.ecolmodel.2005.03.026" class="external-link uri">https://doi.org/10.1016/j.ecolmodel.2005.03.026</a></p>
<p>Hijmans R (2024). terra: Spatial Data Analysis. R package version
1.7-81, <a href="https://rspatial.github.io/terra/" class="external-link uri">https://rspatial.github.io/terra/</a>, <a href="https://rspatial.org/" class="external-link uri">https://rspatial.org/</a>.</p>
<p>Ushey K, Wickham H (2024). renv: Project Environments. R package
version 1.0.7, <a href="https://github.com/rstudio/renv" class="external-link uri">https://github.com/rstudio/renv</a>, <a href="https://rstudio.github.io/renv/" class="external-link uri">https://rstudio.github.io/renv/</a>.</p>
<p>Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R,
Grolemund G, Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E,
Bache SM, Müller K, Ooms J, Robinson D, Seidel DP, Spinu V, Takahashi K,
Vaughan D, Wilke C, Woo K, Yutani H (2019). “Welcome to the tidyverse.”
Journal of Open Source Software, 4(43), 1686. <a href="doi:10.21105/joss.01686" class="uri">doi:10.21105/joss.01686</a>.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Samuel M. Owens, Matthew R. Helmus.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>

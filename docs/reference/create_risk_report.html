<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creates a localized report on the risk of establishment of Lycorma delicatula — create_risk_report • slfSpread</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates a localized report on the risk of establishment of Lycorma delicatula — create_risk_report"><meta name="description" content="This function creates a report at the country or state/province level
for the risk of establishment of Lycorma delicatula. The report covers the major
data outputs from this R package analysis, including current and future risk maps,
range shift maps, risk plots and risk tables."><meta property="og:description" content="This function creates a report at the country or state/province level
for the risk of establishment of Lycorma delicatula. The report covers the major
data outputs from this R package analysis, including current and future risk maps,
range shift maps, risk plots and risk tables."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">slfSpread</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/slfSpread.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quantify risk to specific viticultural regions</h6></li>
    <li><a class="dropdown-item" href="../articles/150_create_risk_report.html">Example usage of create_risk_report.R to create reports of key viticultural areas</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Initialize slfSpread</h6></li>
    <li><a class="dropdown-item" href="../articles/010_initialize_pkg.html">Initialization of renv package for dependencies</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>1. Retrieve and tidy input data for MaxEnt</h6></li>
    <li><a class="dropdown-item" href="../articles/020_retrieve_SLF_records.html">Retrieve SLF records from various sources and tidy them for MaxEnt modeling</a></li>
    <li><a class="dropdown-item" href="../articles/030_retrieve_bioclim_variables.html">Retrieve bioclim rasters from CHELSA and tidy them for MaxEnt modeling</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>2. SDM modeling pipeline</h6></li>
    <li><a class="dropdown-item" href="../articles/040_setup_global_MaxEnt_model.html">Setup for global-scale MaxEnt model</a></li>
    <li><a class="dropdown-item" href="../articles/050_run_global_MaxEnt_model.html">Run global-scale MaxEnt model</a></li>
    <li><a class="dropdown-item" href="../articles/060_setup_regional_MaxEnt_models.html">Setup for regional-scale MaxEnt models</a></li>
    <li><a class="dropdown-item" href="../articles/070_run_regional_invaded_MaxEnt_model.html">Run 'Ri.NAmerica' model trained on SLF invaded region in North America</a></li>
    <li><a class="dropdown-item" href="../articles/080_run_regional_invaded_asian_MaxEnt_model.html">Run 'Ri.Asia' model trained on SLF invaded range in Japan and South Korea</a></li>
    <li><a class="dropdown-item" href="../articles/090_run_regional_native_MaxEnt_model.html">Run 'Rn' model trained on SLF native range in east Asia</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>3. Ensemble Regional-scale SDMs</h6></li>
    <li><a class="dropdown-item" href="../articles/100_run_ExDet_MIC.html">Run an Extrapolation Detection (NT2) analysis and calculate MIC</a></li>
    <li><a class="dropdown-item" href="../articles/110_ensemble_regional_models.html">Ensemble regional-scale models into a single prediction</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>4. Quantify SLF risk and model fit</h6></li>
    <li><a class="dropdown-item" href="../articles/120_create_suitability_maps.html">Map regional ensemble predictions and intercept with global model</a></li>
    <li><a class="dropdown-item" href="../articles/130_create_suitability_xy_plots_viticultural.html">Plot shift in SLF suitability for important viticultural regions under climate change</a></li>
    <li><a class="dropdown-item" href="../articles/131_create_suitability_xy_plots_SLF.html">Plot stability of known SLF populations due climate change effects</a></li>
    <li><a class="dropdown-item" href="../articles/140_plot_response_curves.html">Plot response curves</a></li>
    <li><a class="dropdown-item" href="../articles/141_plot_AUC_var_cont.html">Plot AUC curves and variable contribution graphs</a></li>
    <li><a class="dropdown-item" href="../articles/142_calculate_model_fit.html">Calculate model fit statistics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ieco-lab/slfSpread/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Creates a localized report on the risk of establishment of Lycorma delicatula</h1>
      <small class="dont-index">Source: <a href="https://github.com/ieco-lab/slfSpread/blob/HEAD/R/create_risk_report.R" class="external-link"><code>R/create_risk_report.R</code></a></small>
      <div class="d-none name"><code>create_risk_report.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a report at the country or state/province level
for the risk of establishment of Lycorma delicatula. The report covers the major
data outputs from this R package analysis, including current and future risk maps,
range shift maps, risk plots and risk tables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_risk_report</span><span class="op">(</span></span>
<span>  <span class="va">locality.iso</span>,</span>
<span>  locality.name <span class="op">=</span> <span class="va">locality.iso</span>,</span>
<span>  <span class="va">locality.type</span>,</span>
<span>  save.report <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mypath <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  raster.path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"vignette-outputs"</span>, <span class="st">"rasters"</span><span class="op">)</span>,</span>
<span>  create.dir <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  map.style <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  buffer.dist <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-locality-iso">locality.iso<a class="anchor" aria-label="anchor" href="#arg-locality-iso"></a></dt>
<dd><p>The <a href="https://www.iso.org/obp/ui/#search" class="external-link">alpha-3 ISO code</a>
corresponding to the country of interest. If the desired locality is a state
or province, please still enter the ISO code and supply the name of that
province in <code>locality.name</code>.</p></dd>


<dt id="arg-locality-name">locality.name<a class="anchor" aria-label="anchor" href="#arg-locality-name"></a></dt>
<dd><p>The name of the country, state or province for which to
generate the report. This is optional if the report is for a country, but
required if the report is for a state/province. Avoid special characters,
but please include those used used in the ethnic naming (ex: Côte d'Ivoire).</p></dd>


<dt id="arg-locality-type">locality.type<a class="anchor" aria-label="anchor" href="#arg-locality-type"></a></dt>
<dd><p>One of "country" or "state_province". If you do
not know the state or province you are looking for, you might create a report
at the country level and then look at the return for the name of the state/province
included.</p></dd>


<dt id="arg-save-report">save.report<a class="anchor" aria-label="anchor" href="#arg-save-report"></a></dt>
<dd><p>Logical. Should the report be saved to file? File location
specified by <code>mypath</code>. Note, this requires the use of Google Chrome.</p></dd>


<dt id="arg-mypath">mypath<a class="anchor" aria-label="anchor" href="#arg-mypath"></a></dt>
<dd><p>Character. Only required if saving the report to file.
A file path to the sub directory where the model output will be stored.
Should be used with the <code><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path()</a></code> function (i.e. with '/' instead of '\').
If this sub directory does not already exist and should be created by the
function, set <code>create.dir</code> = TRUE. This will create a folder from the last
part of the filepath in <code>mypath</code>.</p></dd>


<dt id="arg-raster-path">raster.path<a class="anchor" aria-label="anchor" href="#arg-raster-path"></a></dt>
<dd><p>Character. A file path to the directory containing the rasters
necessary to build this function. See details for the rasters that should be
included with this data input and for the default path.</p></dd>


<dt id="arg-create-dir">create.dir<a class="anchor" aria-label="anchor" href="#arg-create-dir"></a></dt>
<dd><p>Logical. Should the last element of <code>mypath</code> create a sub
directory for the report? If TRUE, the main folder will be created for
the model output. If FALSE (ie, the sub directory already exists), no directory
will be created.</p></dd>


<dt id="arg-map-style">map.style<a class="anchor" aria-label="anchor" href="#arg-map-style"></a></dt>
<dd><p>List. This is used to apply ggplot aesthetics
to the mapped outputs. If specified, the given value should be a list of
ggplot aesthetic options. If not, the built-in default list will be used
(see details). See examples for usage.</p></dd>


<dt id="arg-buffer-dist">buffer.dist<a class="anchor" aria-label="anchor" href="#arg-buffer-dist"></a></dt>
<dd><p>Numeric. The distance (in meters) from each IVR coordinate
at which to draw buffers zones on risk maps. Should be the same distance that
was used to calculate the predicted suitability for each IVR region.
See <code>predict.xy.suitability.R</code> for details. If not specified, buffers are not
drawn and suitabiltiy prediction method is assumed to be simple (point-wise).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>returns a report in list format. If save.report = TRUE, will also save the
report to file at destination specified by <code>mypath</code>. The outputs returned to
the global env in a list object include:</p><ul><li><p>viticultural_regions_list - a list of known important wine regions within the locality with predicted suitability values and levels.</p></li>
<li><p>risk_maps - a current and future map of risk for L delicatula establishment. The CMIP6 predictions are based on the mean of the three ssp scenarios</p></li>
<li><p>viticultural_risk_plot = a quantified assessment of the risk for L delicatula establishment for known wine regions within the locality. This plot depicts the intersection of our two modeled scales.</p></li>
<li><p>viticultural_risk_table = a risk table quantifying the level of risk to vineyards according to the quadrant plot</p></li>
<li><p>range_shift_map = a map of potential range expansion for L delicatula under climate change</p></li>
</ul><p>Some maps may be formatted strangely because of a country's outlying territories.
You may need to further crop the plot using <code>xlim()</code> and <code>ylim()</code> (see examples).</p>
<p>Use caution, this function will overwrite previous files output for the same locality.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Requires the following packages: 'tidyverse', 'terra', 'here', 'cli', 'rnaturalearth', 'rnaturalearthhires', 'kableExtra', 'formattable', 'webshot', 'webshot2', 'ggnewscale', 'common'.
<strong>NOTE</strong> This function requires the use of Google Chrome if save.report = TRUE</p>
<p>Note that this function performs downloads from
<a href="https://www.naturalearthdata.com/" class="external-link">naturalearthdata.com</a>, if the data do not
already exist in <code>root/data-raw</code>.The function will automatically create
subfolders in <code>root/data-raw</code> containing the downloaded shapefiles.</p>
<p>This function depends on certain files that have been distributed with this
package, which will be imported from <code>root/R/sysdata.rda</code> when the function
is run. The code to create <code>sysdata.rda</code> can be found in
<code>root/vignettes/160_generate_risk_report.Rmd</code>.</p>
<p>Here is a list of the files included in <code>sysdata.rda</code>:</p><ul><li><p>global_model_summary.rds                                            | created in vignette 050</p></li>
<li><p>ensemble_thresh_values.rds                                          | created in vignette 110</p></li>
<li><p>wineries_tidied.rds                                                 | created in vignette 130</p></li>
<li><p>regional_ensemble_wineries_1981-2010_xy_pred_suit.rds               | created in vignette 130</p></li>
<li><p>regional_ensemble_wineries_2041-2070_GFDL_ssp_mean_xy_pred_suit.rds | created in vignette 130</p></li>
<li><p>global_wineries_1981-2010_xy_pred_suit.rds                          | created in vignette 130</p></li>
<li><p>global_wineries_2041-2070_GFDL_ssp_mean_xy_pred_suit.rds            | created in vignette 130</p></li>
</ul><p>Additionally, 3 rasters are used to create maps. These rasters are located in
<code>root/vignette-outputs/rasters</code>, These are the files:</p><ul><li><p>slf_binarized_summed_1981-2010.asc                                  | created in vignette 120</p></li>
<li><p>slf_binarized_summed_2041-2070_ssp_mean_GFDL.asc                    | created in vignette 120</p></li>
<li><p>slf_range_shift_summed.asc                                          | created in vignette 120</p></li>
</ul><div class="section">
<h3 id="raster-path">raster.path<a class="anchor" aria-label="anchor" href="#raster-path"></a></h3>


<p>Here is a list of the rasters that should be included in this data import.
These rasters are located in <code>root/vignette-outputs/rasters</code>, These are the files:</p><ul><li><p>slf_binarized_summed_1981-2010.asc                                  | created in vignette 120</p></li>
<li><p>slf_binarized_summed_2041-2070_ssp_mean_GFDL.asc                    | created in vignette 120</p></li>
<li><p>slf_range_shift_summed_ssp_mean_GFDL.asc                            | created in vignette 120</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>

    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Samuel M. Owens, Matthew R. Helmus.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

